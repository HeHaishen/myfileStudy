define(["./Transforms-21fa56f0","./Cartesian2-fe435665","./Math-e9e583a9","./when-23b1aa97","./ArcType-94cbcc5d","./arrayRemoveDuplicates-72d928ba","./ComponentDatatype-db261df2","./EllipsoidGeodesic-27d7f111","./EllipsoidRhumbLine-5fcd2f7f","./EncodedCartesian3-c1064016","./GeometryAttribute-e2cab2f1","./IntersectionTests-5927aeeb","./Plane-95acb6df","./WebMercatorProjection-37e11839","./RuntimeError-acd9a015","./WebGLConstants-c32c4572"],function(Oe,be,Pe,B,j,G,Ae,M,V,ke,Le,Y,i,e,a,t){"use strict";function r(e){e=B.defaultValue(e,B.defaultValue.EMPTY_OBJECT),this._ellipsoid=B.defaultValue(e.ellipsoid,be.Ellipsoid.WGS84),this._rectangle=B.defaultValue(e.rectangle,be.Rectangle.MAX_VALUE),this._projection=new Oe.GeographicProjection(this._ellipsoid),this._numberOfLevelZeroTilesX=B.defaultValue(e.numberOfLevelZeroTilesX,2),this._numberOfLevelZeroTilesY=B.defaultValue(e.numberOfLevelZeroTilesY,1)}Object.defineProperties(r.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},rectangle:{get:function(){return this._rectangle}},projection:{get:function(){return this._projection}}}),r.prototype.getNumberOfXTilesAtLevel=function(e){return this._numberOfLevelZeroTilesX<<e},r.prototype.getNumberOfYTilesAtLevel=function(e){return this._numberOfLevelZeroTilesY<<e},r.prototype.rectangleToNativeRectangle=function(e,a){var t=Pe.CrystalMath.toDegrees(e.west),r=Pe.CrystalMath.toDegrees(e.south),n=Pe.CrystalMath.toDegrees(e.east),e=Pe.CrystalMath.toDegrees(e.north);return B.defined(a)?(a.west=t,a.south=r,a.east=n,a.north=e,a):new be.Rectangle(t,r,n,e)},r.prototype.tileXYToNativeRectangle=function(e,a,t,r){r=this.tileXYToRectangle(e,a,t,r);return r.west=Pe.CrystalMath.toDegrees(r.west),r.south=Pe.CrystalMath.toDegrees(r.south),r.east=Pe.CrystalMath.toDegrees(r.east),r.north=Pe.CrystalMath.toDegrees(r.north),r},r.prototype.tileXYToRectangle=function(e,a,t,r){var n=this._rectangle,i=this.getNumberOfXTilesAtLevel(t),s=this.getNumberOfYTilesAtLevel(t),t=n.width/i,i=e*t+n.west,e=(e+1)*t+n.west,t=n.height/s,s=n.north-a*t,t=n.north-(a+1)*t;return(r=!B.defined(r)?new be.Rectangle(i,t,e,s):r).west=i,r.south=t,r.east=e,r.north=s,r},r.prototype.positionToTileXY=function(e,a,t){var r=this._rectangle;if(be.Rectangle.contains(r,e)){var n=this.getNumberOfXTilesAtLevel(a),i=this.getNumberOfYTilesAtLevel(a),s=r.width/n,o=r.height/i,a=e.longitude;r.east<r.west&&(a+=Pe.CrystalMath.TWO_PI);s=(a-r.west)/s|0;n<=s&&(s=n-1);o=(r.north-e.latitude)/o|0;return(i<=o&&(o=i-1),B.defined(t))?(t.x=s,t.y=o,t):new be.Cartesian2(s,o)}};var s=new be.Cartesian3,o=new be.Cartesian3,l=new be.Cartographic,c=new be.Cartesian3,u=new be.Cartesian3,C=new Oe.BoundingSphere,p=new r,d=[new be.Cartographic,new be.Cartographic,new be.Cartographic,new be.Cartographic],h=new be.Cartesian2,Se={};function g(e){be.Cartographic.fromRadians(e.east,e.north,0,d[0]),be.Cartographic.fromRadians(e.west,e.north,0,d[1]),be.Cartographic.fromRadians(e.east,e.south,0,d[2]),be.Cartographic.fromRadians(e.west,e.south,0,d[3]);for(var a=0,t=0,r=0,n=0,i=Se._terrainHeightsMaxLevel,s=0;s<=i;++s){for(var o=!1,l=0;l<4;++l){var c=d[l];if(p.positionToTileXY(c,s,h),0===l)r=h.x,n=h.y;else if(r!==h.x||n!==h.y){o=!0;break}}if(o)break;a=r,t=n}if(0!==s)return{x:a,y:t,level:i<s?i:s-1}}Se.initialize=function(){var e=Se._initPromise;return B.defined(e)?e:(e=Oe.Resource.fetchJson(Oe.buildModuleUrl("Assets/approximateTerrainHeights.json")).then(function(e){Se._terrainHeights=e}),Se._initPromise=e)},Se.getMinimumMaximumHeights=function(e,a){a=B.defaultValue(a,be.Ellipsoid.WGS84);var t=g(e),r=Se._defaultMinTerrainHeight,n=Se._defaultMaxTerrainHeight;return B.defined(t)&&(t=t.level+"-"+t.x+"-"+t.y,t=Se._terrainHeights[t],B.defined(t)&&(r=t[0],n=t[1]),a.cartographicToCartesian(be.Rectangle.northeast(e,l),s),a.cartographicToCartesian(be.Rectangle.southwest(e,l),o),be.Cartesian3.midpoint(o,s,c),a=a.scaleToGeodeticSurface(c,u),r=B.defined(a)?(a=be.Cartesian3.distance(c,a),Math.min(r,-a)):Se._defaultMinTerrainHeight),{minimumTerrainHeight:r=Math.max(Se._defaultMinTerrainHeight,r),maximumTerrainHeight:n}},Se.getBoundingSphere=function(e,a){a=B.defaultValue(a,be.Ellipsoid.WGS84);var t=g(e),r=Se._defaultMaxTerrainHeight;B.defined(t)&&(n=t.level+"-"+t.x+"-"+t.y,n=Se._terrainHeights[n],B.defined(n)&&(r=n[1]));var n=Oe.BoundingSphere.fromRectangle3D(e,a,0);return Oe.BoundingSphere.fromRectangle3D(e,a,r,C),Oe.BoundingSphere.union(n,C,n)},Se._terrainHeightsMaxLevel=6,Se._defaultMaxTerrainHeight=9e3,Se._defaultMinTerrainHeight=-1e5,Se._terrainHeights=void 0,Se._initPromise=void 0,Object.defineProperties(Se,{initialized:{get:function(){return B.defined(Se._terrainHeights)}}});var F=[Oe.GeographicProjection,e.WebMercatorProjection],n=F.length,Ie=Math.cos(Pe.CrystalMath.toRadians(30)),f=Math.cos(Pe.CrystalMath.toRadians(150)),q=0,X=1e3;function y(e){var a=(e=B.defaultValue(e,B.defaultValue.EMPTY_OBJECT)).positions;this.width=B.defaultValue(e.width,1),this._positions=a,this.granularity=B.defaultValue(e.granularity,9999),this.loop=B.defaultValue(e.loop,!1),this.arcType=B.defaultValue(e.arcType,j.ArcType.GEODESIC),this._ellipsoid=be.Ellipsoid.WGS84,this._projectionIndex=0,this._workerName="createGroundPolylineGeometry",this._scene3DOnly=!1}Object.defineProperties(y.prototype,{packedLength:{get:function(){return 1+3*this._positions.length+1+1+1+be.Ellipsoid.packedLength+1+1}}}),y.setProjectionAndEllipsoid=function(e,a){for(var t=0,r=0;r<n;r++)if(a instanceof F[r]){t=r;break}e._projectionIndex=t,e._ellipsoid=a.ellipsoid};var w=new be.Cartesian3,m=new be.Cartesian3,v=new be.Cartesian3;function W(e,a,t,r,n){var i=Z(r,e,0,w),t=Z(r,e,t,m),a=Z(r,a,0,v),t=xe(t,i,m),i=xe(a,i,v);return be.Cartesian3.cross(i,t,n),be.Cartesian3.normalize(n,n)}var T=new be.Cartographic,E=new be.Cartesian3,_=new be.Cartesian3,O=new be.Cartesian3;function U(e,a,t,r,n,i,s,o,l,c,u){if(0!==n){var C;i===j.ArcType.GEODESIC?C=new M.EllipsoidGeodesic(e,a,s):i===j.ArcType.RHUMB&&(C=new V.EllipsoidRhumbLine(e,a,s));i=C.surfaceDistance;if(!(i<n))for(var p=W(e,a,r,s,O),n=Math.ceil(i/n),d=i/n,h=d,g=n-1,f=o.length,y=0;y<g;y++){var w=C.interpolateUsingSurfaceDistance(h,T),m=Z(s,w,t,E),v=Z(s,w,r,_);be.Cartesian3.pack(p,o,f),be.Cartesian3.pack(m,l,f),be.Cartesian3.pack(v,c,f),u.push(w.latitude),u.push(w.longitude),f+=3,h+=d}}}var b=new be.Cartographic;function Z(e,a,t,r){return be.Cartographic.clone(a,b),b.height=t,be.Cartographic.toCartesian(b,e,r)}function xe(e,a,t){return be.Cartesian3.subtract(e,a,t),be.Cartesian3.normalize(t,t),t}function P(e,a,t,r){return r=xe(e,a,r),r=be.Cartesian3.cross(r,t,r),r=be.Cartesian3.normalize(r,r),r=be.Cartesian3.cross(t,r,r)}y.pack=function(e,a,t){var r=B.defaultValue(t,0),n=e._positions,i=n.length;a[r++]=i;for(var s=0;s<i;++s){var o=n[s];be.Cartesian3.pack(o,a,r),r+=3}return a[r++]=e.granularity,a[r++]=e.loop?1:0,a[r++]=e.arcType,be.Ellipsoid.pack(e._ellipsoid,a,r),r+=be.Ellipsoid.packedLength,a[r++]=e._projectionIndex,a[r++]=e._scene3DOnly?1:0,a},y.unpack=function(e,a,t){for(var r=B.defaultValue(a,0),n=e[r++],i=new Array(n),s=0;s<n;s++)i[s]=be.Cartesian3.unpack(e,r),r+=3;var o=e[r++],l=1===e[r++],c=e[r++],u=be.Ellipsoid.unpack(e,r);r+=be.Ellipsoid.packedLength;var C=e[r++],a=1===e[r++];return(t=!B.defined(t)?new y({positions:i}):t)._positions=i,t.granularity=o,t.loop=l,t.arcType=c,t._ellipsoid=u,t._projectionIndex=C,t._scene3DOnly=a,t};var A=new be.Cartesian3,k=new be.Cartesian3,L=new be.Cartesian3,S=new be.Cartesian3;function J(e,a,t,r,n){t=xe(t,a,S),e=P(e,a,t,A),a=P(r,a,t,k);if(Pe.CrystalMath.equalsEpsilon(be.Cartesian3.dot(e,a),-1,Pe.CrystalMath.EPSILON5))return n=be.Cartesian3.cross(t,e,n),n=be.Cartesian3.normalize(n,n);n=be.Cartesian3.add(a,e,n),n=be.Cartesian3.normalize(n,n);t=be.Cartesian3.cross(t,n,L);return n=be.Cartesian3.dot(a,t)<0?be.Cartesian3.negate(n,n):n}var Q=i.Plane.fromPointNormal(be.Cartesian3.ZERO,be.Cartesian3.UNIT_Y),K=new be.Cartesian3,$=new be.Cartesian3,ee=new be.Cartesian3,ae=new be.Cartesian3,te=new be.Cartesian3,re=new be.Cartesian3,ne=new be.Cartographic,ie=new be.Cartographic,se=new be.Cartographic;y.createGeometry=function(e){var a,t,r,n,i,s=!e._scene3DOnly,o=e.loop,l=e._ellipsoid,c=e.granularity,u=e.arcType,C=new F[e._projectionIndex](l),p=q,d=X,h=e._positions,g=h.length;2===g&&(o=!1);for(var f,y,w,m=new V.EllipsoidRhumbLine(void 0,void 0,l),v=[h[0]],M=0;M<g-1;M++)t=h[M],r=h[M+1],f=Y.IntersectionTests.lineSegmentPlane(t,r,Q,re),!B.defined(f)||be.Cartesian3.equalsEpsilon(f,t,Pe.CrystalMath.EPSILON7)||be.Cartesian3.equalsEpsilon(f,r,Pe.CrystalMath.EPSILON7)||(e.arcType===j.ArcType.GEODESIC?v.push(be.Cartesian3.clone(f)):e.arcType===j.ArcType.RHUMB&&(w=l.cartesianToCartographic(f,ne).longitude,n=l.cartesianToCartographic(t,ne),i=l.cartesianToCartographic(r,ie),m.setEndPoints(n,i),y=m.findIntersectionWithLongitude(w,se),f=l.cartographicToCartesian(y,re),!B.defined(f)||be.Cartesian3.equalsEpsilon(f,t,Pe.CrystalMath.EPSILON7)||be.Cartesian3.equalsEpsilon(f,r,Pe.CrystalMath.EPSILON7)||v.push(be.Cartesian3.clone(f)))),v.push(r);o&&(t=h[g-1],r=h[0],f=Y.IntersectionTests.lineSegmentPlane(t,r,Q,re),!B.defined(f)||be.Cartesian3.equalsEpsilon(f,t,Pe.CrystalMath.EPSILON7)||be.Cartesian3.equalsEpsilon(f,r,Pe.CrystalMath.EPSILON7)||(e.arcType===j.ArcType.GEODESIC?v.push(be.Cartesian3.clone(f)):e.arcType===j.ArcType.RHUMB&&(w=l.cartesianToCartographic(f,ne).longitude,n=l.cartesianToCartographic(t,ne),i=l.cartesianToCartographic(r,ie),m.setEndPoints(n,i),y=m.findIntersectionWithLongitude(w,se),f=l.cartographicToCartesian(y,re),!B.defined(f)||be.Cartesian3.equalsEpsilon(f,t,Pe.CrystalMath.EPSILON7)||be.Cartesian3.equalsEpsilon(f,r,Pe.CrystalMath.EPSILON7)||v.push(be.Cartesian3.clone(f)))));var T=v.length,E=new Array(T);for(M=0;M<T;M++){var _=be.Cartographic.fromCartesian(v[M],l);_.height=0,E[M]=_}if(!((T=(E=G.arrayRemoveDuplicates(E,be.Cartographic.equalsEpsilon)).length)<2)){var O=[],b=[],P=[],A=[],k=K,L=$,S=ee,I=ae,x=te,N=E[0],R=E[1];for(k=Z(l,E[T-1],p,k),I=Z(l,R,p,I),L=Z(l,N,p,L),S=Z(l,N,d,S),x=o?J(k,L,S,I,x):W(N,R,d,l,x),be.Cartesian3.pack(x,b,0),be.Cartesian3.pack(L,P,0),be.Cartesian3.pack(S,A,0),O.push(N.latitude),O.push(N.longitude),U(N,R,p,d,c,u,l,b,P,A,O),M=1;M<T-1;++M){var k=be.Cartesian3.clone(L,k),L=be.Cartesian3.clone(I,L),D=E[M];Z(l,D,d,S),Z(l,E[M+1],p,I),J(k,L,S,I,x),a=b.length,be.Cartesian3.pack(x,b,a),be.Cartesian3.pack(L,P,a),be.Cartesian3.pack(S,A,a),O.push(D.latitude),O.push(D.longitude),U(E[M],E[M+1],p,d,c,u,l,b,P,A,O)}var z=E[T-1],H=E[T-2];if(L=Z(l,z,p,L),S=Z(l,z,d,S),x=o?(R=E[0],J(k=Z(l,H,p,k),L,S,I=Z(l,R,p,I),x)):W(H,z,d,l,x),a=b.length,be.Cartesian3.pack(x,b,a),be.Cartesian3.pack(L,P,a),be.Cartesian3.pack(S,A,a),O.push(z.latitude),O.push(z.longitude),o){for(U(z,N,p,d,c,u,l,b,P,A,O),a=b.length,M=0;M<3;++M)b[a+M]=b[M],P[a+M]=P[M],A[a+M]=A[M];O.push(N.latitude),O.push(N.longitude)}return function(e,a,t,r,n,i,s){var o,l,c,u,C,p,d=a._ellipsoid,h=t.length/3-1,g=8*h,f=4*g,y=36*h,w=new(65535<g?Uint32Array:Uint16Array)(y),m=new Float64Array(3*g),v=new Float32Array(f),M=new Float32Array(f),T=new Float32Array(f),E=new Float32Array(f),_=new Float32Array(f);s&&(c=new Float32Array(f),u=new Float32Array(f),C=new Float32Array(f),p=new Float32Array(2*g));var O=i.length/2,b=0,P=He;P.height=0;var A=Be;A.height=0;var k=je,L=Ge;if(s)for(l=0,o=1;o<O;o++)P.latitude=i[l],P.longitude=i[l+1],A.latitude=i[l+2],A.longitude=i[l+3],k=a.project(P,k),L=a.project(A,L),b+=be.Cartesian3.distance(k,L),l+=2;var S=r.length/3;L=be.Cartesian3.unpack(r,0,L);var I,x=0;for(l=3,o=1;o<S;o++)k=be.Cartesian3.clone(L,k),L=be.Cartesian3.unpack(r,l,L),x+=be.Cartesian3.distance(k,L),l+=3;l=3;var N=0,R=0,D=0,z=0,H=!1,B=be.Cartesian3.unpack(t,0,Ye),j=be.Cartesian3.unpack(r,0,Ge),G=be.Cartesian3.unpack(n,0,qe);e&&(_e=be.Cartesian3.unpack(t,t.length-6,Ve),Ne(G,_e,B,j)&&(G=be.Cartesian3.negate(G,G)));var V,Y,F,q,X,W,U,Z=0,J=0,Q=0;for(o=0;o<h;o++){var K=be.Cartesian3.clone(B,Ve),$=be.Cartesian3.clone(j,je),ee=be.Cartesian3.clone(G,Fe);H&&(ee=be.Cartesian3.negate(ee,ee)),B=be.Cartesian3.unpack(t,l,Ye),j=be.Cartesian3.unpack(r,l,Ge),G=be.Cartesian3.unpack(n,l,qe),H=Ne(G,K,B,j),P.latitude=i[N],P.longitude=i[N+1],A.latitude=i[N+2],A.longitude=i[N+3],s&&(Me=function(e,a){var t=Math.abs(e.longitude),r=Math.abs(a.longitude);{if(Pe.CrystalMath.equalsEpsilon(t,Pe.CrystalMath.PI,Pe.CrystalMath.EPSILON11)){var n=Pe.CrystalMath.sign(a.longitude);return e.longitude=n*(t-Pe.CrystalMath.EPSILON11),1}if(Pe.CrystalMath.equalsEpsilon(r,Pe.CrystalMath.PI,Pe.CrystalMath.EPSILON11)){e=Pe.CrystalMath.sign(e.longitude);return a.longitude=e*(r-Pe.CrystalMath.EPSILON11),2}}return 0}(P,A),V=a.project(P,Ke),(pe=xe(Y=a.project(A,$e),V,ua)).y=Math.abs(pe.y),F=ea,q=aa,0===Me||be.Cartesian3.dot(pe,be.Cartesian3.UNIT_Y)>Ie?(F=Re(a,P,ee,V,ea),q=Re(a,A,G,Y,aa)):1===Me?(q=Re(a,A,G,Y,aa),F.x=0,F.y=Pe.CrystalMath.sign(P.longitude-Math.abs(A.longitude)),F.z=0):(F=Re(a,P,ee,V,ea),q.x=0,q.y=Pe.CrystalMath.sign(P.longitude-A.longitude),q.z=0));var ae=be.Cartesian3.distance($,j),te=ke.EncodedCartesian3.fromCartesian(K,la),re=be.Cartesian3.subtract(B,K,ta),ne=be.Cartesian3.normalize(re,ia),ie=be.Cartesian3.subtract($,K,ra);ie=be.Cartesian3.normalize(ie,ie);var se=be.Cartesian3.cross(ne,ie,ia);se=be.Cartesian3.normalize(se,se);var oe=be.Cartesian3.cross(ie,ee,sa);oe=be.Cartesian3.normalize(oe,oe);var le=be.Cartesian3.subtract(j,B,na);le=be.Cartesian3.normalize(le,le);var ce=be.Cartesian3.cross(G,le,oa);ce=be.Cartesian3.normalize(ce,ce);var ue=ae/x,Ce=Z/x,pe=0,de=0,he=0;for(s&&(pe=be.Cartesian3.distance(V,Y),X=ke.EncodedCartesian3.fromCartesian(V,ca),W=be.Cartesian3.subtract(Y,V,ua),Te=(U=be.Cartesian3.normalize(W,Ca)).x,U.x=U.y,U.y=-Te,de=pe/b,he=J/b),I=0;I<8;I++){var ge=z+4*I,fe=R+2*I,ye=ge+3,we=I<4?1:-1,me=2===I||3===I||6===I||7===I?1:-1;be.Cartesian3.pack(te.high,v,ge),v[ye]=re.x,be.Cartesian3.pack(te.low,M,ge),M[ye]=re.y,be.Cartesian3.pack(oe,T,ge),T[ye]=re.z,be.Cartesian3.pack(ce,E,ge),E[ye]=ue*we,be.Cartesian3.pack(se,_,ge);var ve=Ce*me;0===ve&&me<0&&(ve=9),_[ye]=ve,s&&(c[ge]=X.high.x,c[ge+1]=X.high.y,c[ge+2]=X.low.x,c[ge+3]=X.low.y,C[ge]=-F.y,C[ge+1]=F.x,C[ge+2]=q.y,C[ge+3]=-q.x,u[ge]=W.x,u[ge+1]=W.y,u[ge+2]=U.x,u[ge+3]=U.y,p[fe]=de*we,0===(ve=he*me)&&me<0&&(ve=9),p[fe+1]=ve)}var Me=Je,ne=Qe,ie=Ue,ee=Ze,le=be.Rectangle.fromCartographicArray(Xe,We),Te=Se.getMinimumMaximumHeights(le,d),le=Te.minimumTerrainHeight,Te=Te.maximumTerrainHeight;Q+=le,Q+=Te,De(K,$,le,Te,Me,ie),De(B,j,le,Te,ne,ee);Te=be.Cartesian3.multiplyByScalar(se,Pe.CrystalMath.EPSILON5,pa);be.Cartesian3.add(Me,Te,Me),be.Cartesian3.add(ne,Te,ne),be.Cartesian3.add(ie,Te,ie),be.Cartesian3.add(ee,Te,ee),ze(Me,ne),ze(ie,ee),be.Cartesian3.pack(Me,m,D),be.Cartesian3.pack(ne,m,D+3),be.Cartesian3.pack(ee,m,D+6),be.Cartesian3.pack(ie,m,D+9),Te=be.Cartesian3.multiplyByScalar(se,-2*Pe.CrystalMath.EPSILON5,pa),be.Cartesian3.add(Me,Te,Me),be.Cartesian3.add(ne,Te,ne),be.Cartesian3.add(ie,Te,ie),be.Cartesian3.add(ee,Te,ee),ze(Me,ne),ze(ie,ee),be.Cartesian3.pack(Me,m,D+12),be.Cartesian3.pack(ne,m,D+15),be.Cartesian3.pack(ee,m,D+18),be.Cartesian3.pack(ie,m,D+21),N+=2,l+=3,R+=16,D+=24,z+=32,Z+=ae,J+=pe}var Ee=l=0;for(o=0;o<h;o++){for(I=0;I<ga;I++)w[l+I]=ha[I]+Ee;Ee+=8,l+=ga}e=da;Oe.BoundingSphere.fromVertices(t,be.Cartesian3.ZERO,3,e[0]),Oe.BoundingSphere.fromVertices(r,be.Cartesian3.ZERO,3,e[1]);var _e=Oe.BoundingSphere.fromBoundingSpheres(e);_e.radius+=Q/(2*h);e={position:new Le.GeometryAttribute({componentDatatype:Ae.ComponentDatatype.DOUBLE,componentsPerAttribute:3,normalize:!1,values:m}),startHiAndForwardOffsetX:fa(v),startLoAndForwardOffsetY:fa(M),startNormalAndForwardOffsetZ:fa(T),endNormalAndTextureCoordinateNormalizationX:fa(E),rightNormalAndTextureCoordinateNormalizationY:fa(_)};s&&(e.startHiLo2D=fa(c),e.offsetAndRight2D=fa(u),e.startEndNormals2D=fa(C),e.texcoordNormalization2D=new Le.GeometryAttribute({componentDatatype:Ae.ComponentDatatype.FLOAT,componentsPerAttribute:2,normalize:!1,values:p}));return new Le.Geometry({attributes:e,indices:w,boundingSphere:_e})}(o,C,P,A,b,O,s)}};var I=new be.Cartesian3,x=new Oe.Matrix3,N=new Oe.Quaternion;function Ne(e,a,t,r){a=xe(t,a,I),a=be.Cartesian3.dot(a,e);if(Ie<a||a<f){t=xe(r,t,S),a=a<f?Pe.CrystalMath.PI_OVER_TWO:-Pe.CrystalMath.PI_OVER_TWO,a=Oe.Quaternion.fromAxisAngle(t,a,N),a=Oe.Matrix3.fromQuaternion(a,x);return Oe.Matrix3.multiplyByVector(a,e,e),!0}return!1}var R=new be.Cartographic,D=new be.Cartesian3,z=new be.Cartesian3;function Re(e,a,t,r,n){var i=be.Cartographic.toCartesian(a,e._ellipsoid,D),s=be.Cartesian3.add(i,t,z),o=!1,l=e._ellipsoid,c=l.cartesianToCartographic(s,R);Math.abs(a.longitude-c.longitude)>Pe.CrystalMath.PI_OVER_TWO&&(o=!0,s=be.Cartesian3.subtract(i,t,z),c=l.cartesianToCartographic(s,R)),c.height=0;c=e.project(c,n);return(n=be.Cartesian3.subtract(c,r,n)).z=0,n=be.Cartesian3.normalize(n,n),o&&be.Cartesian3.negate(n,n),n}var H=new be.Cartesian3,oe=new be.Cartesian3;function De(e,a,t,r,n,i){var s=be.Cartesian3.subtract(a,e,H);be.Cartesian3.normalize(s,s);t-=q,t=be.Cartesian3.multiplyByScalar(s,t,oe);be.Cartesian3.add(e,t,n);r-=X,t=be.Cartesian3.multiplyByScalar(s,r,oe);be.Cartesian3.add(a,t,i)}var le=new be.Cartesian3;function ze(e,a){var t=i.Plane.getPointDistance(Q,e),r=i.Plane.getPointDistance(Q,a),n=le;Pe.CrystalMath.equalsEpsilon(t,0,Pe.CrystalMath.EPSILON2)?(n=xe(a,e,n),be.Cartesian3.multiplyByScalar(n,Pe.CrystalMath.EPSILON2,n),be.Cartesian3.add(e,n,e)):Pe.CrystalMath.equalsEpsilon(r,0,Pe.CrystalMath.EPSILON2)&&(n=xe(e,a,n),be.Cartesian3.multiplyByScalar(n,Pe.CrystalMath.EPSILON2,n),be.Cartesian3.add(a,n,a))}var He=new be.Cartographic,Be=new be.Cartographic,je=new be.Cartesian3,Ge=new be.Cartesian3,Ve=new be.Cartesian3,Ye=new be.Cartesian3,Fe=new be.Cartesian3,qe=new be.Cartesian3,Xe=[He,Be],We=new be.Rectangle,Ue=new be.Cartesian3,Ze=new be.Cartesian3,Je=new be.Cartesian3,Qe=new be.Cartesian3,Ke=new be.Cartesian3,$e=new be.Cartesian3,ea=new be.Cartesian3,aa=new be.Cartesian3,ta=new be.Cartesian3,ra=new be.Cartesian3,na=new be.Cartesian3,ia=new be.Cartesian3,sa=new be.Cartesian3,oa=new be.Cartesian3,la=new ke.EncodedCartesian3,ca=new ke.EncodedCartesian3,ua=new be.Cartesian3,Ca=new be.Cartesian3,pa=new be.Cartesian3,da=[new Oe.BoundingSphere,new Oe.BoundingSphere],ha=[0,2,1,0,3,2,0,7,3,0,4,7,0,5,4,0,1,5,5,7,4,5,6,7,5,2,6,5,1,2,3,6,2,3,7,6],ga=ha.length;function fa(e){return new Le.GeometryAttribute({componentDatatype:Ae.ComponentDatatype.FLOAT,componentsPerAttribute:4,normalize:!1,values:e})}return y._projectNormal=Re,function(e,a){return Se.initialize().then(function(){return B.defined(a)&&(e=y.unpack(e,a)),y.createGeometry(e)})}});
